<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>TechCareer · Analiza tu CV</title>

<style>
:root {
  --bg: #050b16;
  --card: rgba(255,255,255,0.06);
  --border: rgba(255,255,255,0.12);
  --accent: #6ef1d4;
  --accent2: #3fb7ff;
  --muted: #9fbfc1;
}

* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: Inter, system-ui, sans-serif;
  background:
    radial-gradient(circle at 15% 10%, #0d3248, transparent 40%),
    radial-gradient(circle at 80% 20%, #0b3b2e, transparent 45%),
    var(--bg);
  color: #eaf7f6;
}

/* ===== MAIN ===== */
main {
  max-width: 1400px;
  margin: 0 auto;
  padding: 48px 48px 120px;
}

/* ===== HERO ===== */
.hero-container {
  max-width: 1000px;
  margin: 0 auto 96px;
  text-align: center;
}

.hero-title {
  font-size: 42px;
  font-weight: 900;
  line-height: 0.5;
  margin-bottom: 35px;
}

.hero-sub {
  font-size: 17px;
  color: var(--muted);
  max-width: 720px;
  margin: 0 auto;
}


/* ===== WELCOME TEXT ===== */
.welcome-text {
  margin-top: 12px;
  font-size: 18px;
  font-weight: 600;
  color: var(--accent);
}


/* ===== HERO GRID ===== */
.hero-grid {
  margin-top: 56px;
  display: grid;
  grid-template-columns: 180px minmax(620px, 1fr) 180px;
  gap: 32px;
  align-items: center;
}

/* ===== SIDE BOX ===== */
.side-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 22px;
  padding: 24px;
  font-size: 14px;
}

.side-card h3 {
  margin-top: 0;
  font-size: 16px;
}

.side-card ul {
  padding-left: 18px;
  color: var(--muted);
}

/* ===== UPLOADER ===== */
.uploader {
  padding: 40px;
  border-radius: 28px;
  background: linear-gradient(
    160deg,
    rgba(110,241,212,0.12),
    rgba(255,255,255,0.06)
  );
  border: 2px dashed rgba(255,255,255,0.25);
  text-align: center;
}

.uploader h2 {
  font-size: 22px;
  margin-bottom: 8px;
}

.uploader p {
  font-size: 14px;
  color: var(--muted);
  margin-bottom: 28px;
}

.uploader label {
  display: block;
  padding: 36px;
  border: 2px dashed rgba(110,241,212,0.6);
  border-radius: 22px;
  cursor: pointer;
  background: rgba(0,0,0,0.25);
  margin-bottom: 28px;
}

.uploader strong {
  font-size: 16px;
}

/* ===== BUTTON ===== */
.actions {
  margin-top: 16px;
}

button {
  padding: 14px 36px;
  border-radius: 14px;
  border: none;
  font-size: 16px;
  font-weight: 900;
  cursor: pointer;
  background: linear-gradient(90deg, var(--accent), var(--accent2));
  color: #022;
}

/* ===== INFO GRID ===== */
.info-grid {
  max-width: 1000px;
  margin: 0 auto;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 32px;
}

/* ===== RESPONSIVE ===== */
@media(max-width: 1100px) {
  .hero-grid {
    grid-template-columns: 1fr;
  }
}

.file-label{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
  font-size:16px;
}

.file-name{
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  max-width:420px;
}

.file-remove{
  cursor:pointer;
  font-weight:900;
  color:#ff6b6b;
  font-size:18px;
  line-height:1;
}

.file-remove:hover{
  transform:scale(1.15);
}
</style>
</head>

<body>

<!-- HEADER -->
<div id="app-header"></div>

<script>
  // ===============================
  // LOAD HEADER
  // ===============================
  fetch("/screens/common/components/header.html")
    .then(res => res.text())
    .then(html => {
      document.getElementById("app-header").innerHTML = html;
      initHeader();
    });

  // ===============================
  // INIT HEADER
  // ===============================
  function initHeader() {
    const container = document.getElementById("headerActions");
    if (!container) return;

    const raw = localStorage.getItem("auth_user");

    // ---------- NO LOGUEADO ----------
    if (!raw) {
      container.innerHTML = `
        <button class="btn-secondary"
          onclick="location.href='/screens/common/auth/login.html'">
          Login
        </button>
        <button class="btn-primary">Go Pro</button>
      `;
      return;
    }

    // ---------- LOGUEADO ----------
    const session = JSON.parse(raw);
    const user = session.user || session;

    const firstName = user.name ? user.name.split(" ")[0] : "Usuario";
    const secName = user.name ? user.name.split(" ")[1] : "Usuario";
    const initial = firstName.charAt(0).toUpperCase();

    container.innerHTML = `
      <div class="user-dropdown">
        <button class="user-trigger" onclick="toggleUserMenu(event)">
          <span class="avatar">${initial}</span>
          <span class="user-name">${firstName} ${secName}</span>
          <span class="caret">▾</span>
        </button>

        <div class="user-menu">
          <div class="user-menu-item">
            Perfil
          </div>
          <div class="user-menu-item logout" onclick="logout()">
            Salir
          </div>
        </div>
      </div>

      <button class="btn-primary">Go Pro</button>
    `;
  }

  // ===============================
  // DROPDOWN TOGGLE
  // ===============================
  function toggleUserMenu(e) {
    e.stopPropagation();
    const menu = e.currentTarget.nextElementSibling;
    menu.classList.toggle("open");
  }

  document.addEventListener("click", () => {
    document
      .querySelectorAll(".user-menu.open")
      .forEach(menu => menu.classList.remove("open"));
  });

  // ===============================
  // LOGOUT
  // ===============================
  function logout() {
    localStorage.removeItem("auth_user");
    location.href = "/screens/particulares/home.html";
  }
</script>





<main>


  <div class="hero-container">


    <p id="welcomeText" class="welcome-text"></p>
    <h1 class="hero-title">
      Analiza tu CV
    </h1>
    <h1 class="hero-title"  >
      con criterio real de mercado
    </h1>

    <p class="hero-sub">
      Analizamos tu perfil profesional con inteligencia artificial entrenada
      con datos reales del sector tecnológico.
    </p>

    <!-- GRID -->
    <div class="hero-grid">

      <div class="side-card">
        <h3>Qué analiza la IA</h3>
        <ul>
          <li>Experiencia real</li>
          <li>Stack tecnológico</li>
          <li>Encaje por rol</li>
        </ul>
      </div>

      <!-- UPLOADER -->
      <section class="uploader">

        <h2>Sube tu CV en PDF</h2>
        <p>
          Arrastra el archivo o haz clic para seleccionarlo.<br>
          El análisis es inmediato y el archivo no se guarda.
        </p>

        <label for="fileInput">
          <div id="fileLabel" class="file-label">
            Arrastra aquí tu CV o haz clic para subirlo
          </div>
        </label>

        <input
          id="fileInput"
          type="file"
          accept="application/pdf"
          style="display:none"
        />

        <div class="actions">
          <button id="analyzeBtn">Analizar CV</button>
        </div>

      </section>

      <div class="side-card">
        <h3>Por qué confiar</h3>
        <ul>
          <li>Lógica recruiter</li>
          <li>Datos de mercado</li>
          <li>Análisis objetivo</li>
        </ul>
      </div>

    </div>

    <!-- INFO -->
    <section class="info-grid" style="margin-top:80px">

      <div class="side-card">
        <h3>Qué obtendrás</h3>
        <ul>
          <li>Rol principal</li>
          <li>Top perfiles alternativos</li>
          <li>Probabilidades reales</li>
          <li>Base salarial</li>
        </ul>
      </div>

      <div class="side-card">
        <h3>Cómo funciona</h3>
        <ul>
          <li>Extraemos texto</li>
          <li>Analizamos skills</li>
          <li>Comparamos con mercado</li>
          <li>Generamos insights</li>
        </ul>
      </div>

    </section>

    <!-- HISTORIAL -->
    <section style="margin-top:56px">
      <h2 style="margin-bottom:16px;font-size:22px">
        CVs subidos
      </h2>
      <div id="pdfHistory"></div>
    </section>

  </div>

</main>

<!-- FOOTER -->
<div id="app-footer"></div>

<script>
fetch("../common/components/footer.html")
  .then(r => r.text())
  .then(h => document.getElementById("app-footer").innerHTML = h);
</script>

<script src="./js/home.js"></script>
<script src="./js/pdf_upload.js"></script>

<script>
  (function () {
    const el = document.getElementById("welcomeText");
    if (!el) return;

    const raw = localStorage.getItem("auth_user");
    if (!raw) return;

    try {
      const session = JSON.parse(raw);
      const user = session.user || session;

      if (!user.name) return;

      const firstName = user.name.split(" ")[0];

      el.textContent = `Bienvenid@, ${firstName}`;
    } catch (e) {
      console.warn("No se pudo leer el usuario");
    }
  })();
</script>

</body>
</html>
